Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:

- ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¾Ñ‚ Ñ„Ñ€Ğ¾Ğ½Ñ‚Ğ° / Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°.
    
- ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ + Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸.
    
- ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ² Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€.
    
- Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ.
    

---

# ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Gateway Service

```bash
gateway/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ routes.py         # FastAPI ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹: /login, /search, /profile
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config.py         # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (env, Ğ¿Ğ¾Ñ€Ñ‚Ñ‹, ÑƒÑ€Ğ»Ñ‹ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²)
â”‚   â”‚   â”œâ”€â”€ logger.py         # Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â”‚   â”‚   â””â”€â”€ security.py       # JWT, OAuth2, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ Aggregator_client.py  # gRPC/HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğº Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ñƒ
â”‚   â”‚   â””â”€â”€ user_service_client.py  # ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹/Ğ±Ğ¸Ğ»Ğ»Ğ¸Ğ½Ğ³Ğ°
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ user.py           # Pydantic-ÑÑ…ĞµĞ¼Ñ‹: User, AuthRequest, AuthResponse
â”‚   â”‚   â”œâ”€â”€ search.py         # SearchRequest, SearchResponse
â”‚   â”‚   â””â”€â”€ subscription.py   # SubscriptionStatus
â”‚   â”‚
â”‚   â””â”€â”€ main.py               # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° (FastAPI Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ)
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_auth.py
â”‚   â”œâ”€â”€ test_search.py
â”‚   â””â”€â”€ test_integration.py
â”‚
â”œâ”€â”€ dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

# âš™ï¸ Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

1. **Ğ¤Ñ€Ğ¾Ğ½Ñ‚ / ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ â†’ Gateway**
    
    - Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ `/search?query=iphone` Ñ JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ¼.
        
2. **Gateway â†’ Auth/Users Service**
    
    - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ñ‚Ğ¾ĞºĞµĞ½, Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹.
        
3. **Gateway â†’ Aggregator**
    
    - ĞŸÑ€Ğ¾Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° (HTTP/gRPC).
        
4. **Aggregator â†’ Gateway â†’ ĞšĞ»Ğ¸ĞµĞ½Ñ‚**
    
    - Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹.
        

---

# ğŸ“Œ ĞœĞ¸Ğ½Ğ¸-ER Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Gateway

- **User**
    
    - `id: uuid`
        
    - `email: str`
        
    - `subscription: str (free/premium)`
        
    - `expires_at: datetime`
        
- **SearchRequest**
    
    - `query: str`
        
    - `categories: list[str]`
        
- **SearchResponse**
    
    - `request_id: str`
        
    - `results: list[Product]`
        

---

ğŸ‘‰ Ğ’Ğ°Ğ¶Ğ½Ğ¾: Gateway **Ğ½Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ** (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚), Ğ¾Ğ½ Ğ²ÑĞµĞ³Ğ¾ Ğ»Ğ¸ÑˆÑŒ **Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğ¸ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚**.

---
